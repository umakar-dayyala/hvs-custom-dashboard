"use strict";(window.webpackChunksupplementarydashboard=window.webpackChunksupplementarydashboard||[]).push([[251],{5251:(e,n,t)=>{t.r(n),t.d(n,{default:()=>M});var l=t(57528),a=t(65043),o=t(82703),r=t(89002),i=t(75827),s=t(68903),c=t(11906),d=t(22258),h=t(22206),m=(t(22019),t(97901)),f=t(83290),u=t(32605),p=t(70579);const v=e=>{let{floorBasedData:n}=e;const t=(0,a.useRef)(null),l=(0,a.useRef)(null),r=n||{},i=(r.activeSensors||0)+(r.inactiveSensors||0)+(r.disconnected_sensors||0)+(r.unhealthySensors||0),s=0===(r.activeSensors||0)&&(r.inactiveSensors||0)+(r.disconnected_sensors||0)===0&&0===(r.unhealthySensors||0)&&0===(r.active_alarms||0)&&0===(r.unhealthy_alarms||0);return(0,a.useEffect)((()=>{if(!t.current||s)return;t.current.innerHTML="";const e={name:r.floor||"Unknown Floor",children:[{name:"Active",value:r.activeSensors||0,children:r.active_alarms>0?[{name:"Active Alarms",value:r.active_alarms}]:[]},{name:"Inactive",value:(r.inactiveSensors||0)+(r.disconnected_sensors||0)},{name:"Unhealthy",value:r.unhealthySensors||0,children:r.unhealthy_alarms>0?[{name:"Unhealthy Alarms",value:r.unhealthy_alarms}]:[]}]},n=requestAnimationFrame((()=>{(0,u.A)().data(e).width(120).height(120).label((()=>"")).tooltipContent((()=>"")).onClick((()=>null)).onHover((e=>{l.current&&(e&&e.name!==r.floor?l.current.textContent="".concat(e.name,": ").concat(e.value):l.current.textContent="Total: ".concat(i))})).color((e=>e.name===r.floor?"rgba(255, 255, 255, 0.1)":"Active"===e.name?"#29991d":"Inactive"===e.name?"RGB(128, 128,128)":"Unhealthy"===e.name?"#ff9933":"Active Alarms"===e.name||"Unhealthy Alarms"===e.name?"#E30613":"rgba(0, 0, 0, 0.1)"))(t.current)}));return()=>{cancelAnimationFrame(n),t.current&&(t.current.innerHTML="")}}),[r]),(0,p.jsx)(o.A,{mt:2,display:"flex",justifyContent:"center",position:"relative",children:s?(0,p.jsx)(o.A,{textAlign:"center",children:"No data available to display"}):(0,p.jsxs)(o.A,{position:"relative",width:120,height:120,children:[(0,p.jsx)("div",{ref:t}),(0,p.jsx)(o.A,{ref:l,position:"absolute",top:"50%",left:"50%",sx:{transform:"translate(-50%, -50%)",fontSize:"14px",fontWeight:"bold",pointerEvents:"none",textAlign:"center"},children:"Total: ".concat(i)})]})})};t(70231);t.p;var x=t(79516),A=t(24295),g=t(45586),y=t(17933),b=t(87670),w=t(51059),S=t(90334),j=t(82371),D=t(65061);t.p;t(78265),t(74050),t(57135);t.p;t.p;const C=t.p+"static/media/error-circle.3d3836db033f450ead848c757575a2e1.svg";const _=t.p+"static/media/check-circle.a00dec72d85bc80bcefd824feff8d133.svg";var Y,I=t(33644),k=t(98590);const F=["#29991d","RGB(128, 128,128)","#ff9933","red"],U=((0,f.i7)(Y||(Y=(0,l.A)(["\n  0% { transform: scale(1); opacity: 1; }\n  50% { transform: scale(0.8); opacity: 0.5; }\n  100% { transform: scale(1); opacity: 1; }\n"]))),e=>{let{floorData:n}=e;const{setValue:t}=(0,a.useContext)(m.i),l=(0,r.Zp)(),[i,f]=(0,a.useState)(0);(0,a.useEffect)((()=>{const e=n.map((e=>{var n,t,l,a,o,r;const i=(null!==(n=e.biological_alarms)&&void 0!==n?n:0)+(null!==(t=e.chemical_alarms)&&void 0!==t?t:0)+(null!==(l=e.radiological_alarms)&&void 0!==l?l:0),s=null!==(a=e.activeSensors)&&void 0!==a?a:0,c=null!==(o=e.totalSensors)&&void 0!==o?o:0,d=(null!==(r=e.unhealthySensors)&&void 0!==r?r:0)>0;return i>0?"#E30613":d?"#ff9933":0===c||0===s?"RGB(128, 128,128)":"#28A745"}));t(e);const l=setInterval((()=>f((e=>e+1))),2e4);return()=>clearInterval(l)}),[n,t]);return console.log("Floor new Data:",n),(0,k.Y)(o.A,{mt:2,children:(0,k.Y)(s.Ay,{container:!0,spacing:4,justifyContent:"center",children:n.map(((e,n)=>{var t,a,r,i,m,f,u,p,Y;const U=(null!==(t=e.disconnected_sensors)&&void 0!==t?t:0)+(null!==(a=e.inactiveSensors)&&void 0!==a?a:0),E=(null!==(r=e.biological_alarms)&&void 0!==r?r:0)+(null!==(i=e.chemical_alarms)&&void 0!==i?i:0)+(null!==(m=e.radiological_alarms)&&void 0!==m?m:0),R=(e.totalSensors,E>0?"red":e.unhealthySensors>0?"#ff9933":U>0||0===e.activeSensors||0===e.totalSensors?"RGB(128, 128,128)":"#29991d"),B=0===e.totalSensors?S.A:e.biological_alarms>0?b.A:U>0||0===e.activeSensors?S.A:A.A,W=0===e.totalSensors?j.A:e.chemical_alarms>0?y.A:U>0||0===e.activeSensors?j.A:x.A,T=0===e.totalSensors?D.A:e.radiological_alarms>0?w.A:U>0||0===e.activeSensors?D.A:g.A,G=[e.activeSensors||0,U||0,e.unhealthySensors||0,E||0],H=null!==(f=null===(u=e.floor)||void 0===u?void 0:u.toUpperCase())&&void 0!==f?f:"";H.includes("QRT")||H.includes("LAB"),0===(null!==(p=e.totalSensors)&&void 0!==p?p:0)||(Y=e.activeSensors);return(0,k.Y)(s.Ay,{item:!0,xs:12,sm:6,md:4,lg:3,xl:2.4,children:(0,k.Y)(d.J,{statusColor:R,sx:{width:"100%",height:"100%"},children:(0,k.FD)(o.A,{p:2,backgroundColor:"white",display:"flex",flexDirection:"column",height:"100%",children:[(0,k.Y)(h.U,{variant:"title3",fontWeight:"bold",mb:1,children:H}),(0,k.FD)(o.A,{bgcolor:G.every((e=>!e))?"RGB(128, 128,128)":E>0?"#E30613":"#28A745",color:"white",px:2,py:1,height:60,display:"flex",alignItems:"center",justifyContent:"space-between",gap:1,mt:2,mx:-2,children:[(0,k.Y)(h.U,{variant:"caption",sx:{color:"white"},children:E>0?"".concat(E," alarms detected"):"No alarms detected"}),(0,k.Y)("img",{src:E>0?C:_,width:16,height:16,alt:"status"})]}),(0,k.Y)(o.A,{display:"flex",justifyContent:"center",alignItems:"center",mb:2,sx:{height:160},children:G.every((e=>!e))?(0,k.Y)(h.U,{variant:"title4",color:"textSecondary",mt:5,children:"No sensors available to display"}):(0,k.FD)(o.A,{display:"flex",justifyContent:"center",alignItems:"center",width:"100%",children:[(0,k.Y)(v,{floorBasedData:e}),(0,k.Y)(o.A,{ml:2,children:["Active","Inactive","Unhealthy","CBRN Alarms"].map(((e,n)=>(0,k.FD)(o.A,{display:"flex",alignItems:"center",mb:1,children:[(0,k.Y)(o.A,{width:12,height:12,borderRadius:"50%",bgcolor:F[n],mr:1}),(0,k.FD)(h.U,{variant:"caption",children:[e,": ",G[n]||0]})]},e)))})]})}),(0,k.FD)(o.A,{display:"flex",justifyContent:"space-between",alignItems:"center",mt:"auto",children:[(0,k.Y)(o.A,{display:"flex",gap:4,children:[W,B,T].map(((n,t)=>(0,k.FD)(o.A,{display:"flex",flexDirection:"column",alignItems:"center",gap:.5,children:[(0,k.Y)("img",{src:n,width:20,height:20}),(0,k.Y)(h.U,{variant:"caption",style:{fontWeight:"bold",color:"#000"},children:[e.chemical_alarms,e.biological_alarms,e.radiological_alarms][t]||0})]},t)))}),(0,k.FD)(o.A,{display:"flex",flexDirection:"row",alignItems:"center",gap:5,children:[(0,k.FD)(o.A,{display:"flex",flexDirection:"column",alignItems:"center",children:[(0,k.Y)(h.U,{variant:"caption",style:{fontWeight:"bold",color:"#000"},children:"Zones"}),(0,k.Y)(h.U,{variant:"caption",style:{fontWeight:"bold",color:"#000"},children:e.totalZones})]}),(0,k.FD)(o.A,{display:"flex",flexDirection:"column",alignItems:"center",children:[(0,k.Y)(h.U,{variant:"caption",style:{fontWeight:"bold",color:"#000"},children:"Locations"}),(0,k.Y)(h.U,{variant:"caption",style:{fontWeight:"bold",color:"#000"},children:e.total_location||0})]})]})]}),(0,k.Y)(I.A,{}),(0,k.Y)(o.A,{display:"flex",justifyContent:"flex-end",children:(0,k.Y)(c.A,{variant:"contained",sx:{backgroundColor:"#0073E7",border:"1px solid #146BD2",color:"#fff",textTransform:"none"},onClick:()=>(e=>l("floorwise?floor="+e))(e.floor),children:"Go to Floor"})})]})})},n)}))})})});t(99147);var E,R,B=t(54260),W=(t(82407),t(65308),t(69493)),T=t(85865);const G=(0,f.i7)(E||(E=(0,l.A)(["\n  0% {\n    transform: translateX(100vw);\n  }\n  100% {\n    transform: translateX(-100%);\n  }\n"]))),H=(0,f.i7)(R||(R=(0,l.A)(["\n  0% { opacity: 1; }\n  30% { opacity: 0.5; }\n  100% { opacity: 1; }\n"]))),N=()=>{const[e,n]=(0,a.useState)(!1);(0,a.useEffect)((()=>{let e;const t=async()=>{const e=(await(0,B.$j)()).some((e=>"CBRN Alarms"===e.title&&Number(e.value)>0));n(e)};return t(),e=setInterval(t,5e3),()=>clearInterval(e)}),[]);const t=e?"Alarm Detected":"No Alarm Detected";return(0,p.jsx)(o.A,{sx:{width:"100%",overflow:"hidden",whiteSpace:"nowrap",backgroundColor:e?"#E30613":"#008000",padding:"8px",position:"relative",height:"48px",border:e?"2px solid red":"2px solid green",borderRadius:"5px",color:"white",textAlign:"center",animation:e?"".concat(H," 1s infinite"):"none"},children:(0,p.jsx)(o.A,{sx:{display:"flex",width:"100%",position:"relative",overflow:"hidden"},children:(0,p.jsx)(T.A,{variant:"h6",sx:{display:"inline-block",whiteSpace:"nowrap",animation:"".concat(G," 25s linear infinite"),fontWeight:"bold"},children:t})})})};var L,Z=t(53536),q=t(84410);const z=(0,f.AH)(L||(L=(0,l.A)(["\n  height: 100vh;\n  display: flex;\n  flex-direction: column;\n  overflow: hidden;\n\n  &:hover {\n    overflow: auto;\n  }\n\n  /* Hide scrollbar in Firefox */\n  scrollbar-width: none;\n  /* Hide scrollbar in IE and Edge */\n  -ms-overflow-style: none;\n\n  /* Hide scrollbar in WebKit browsers */\n  &::-webkit-scrollbar {\n    width: 0px;\n  }\n\n  /* Show scrollbar on hover */\n  &:hover::-webkit-scrollbar {\n    width: 8px;\n  }\n\n  &:hover::-webkit-scrollbar-thumb {\n    background: #d3d3d3;\n    border-radius: 4px;\n  }\n"]))),M=()=>{const[e,n]=(0,a.useState)([]),[t,l]=(0,a.useState)([]),[s,c]=(0,a.useState)(!0),d=(0,r.Zp)();(0,a.useEffect)((()=>{let a,o=!0,r=!0;const i=async()=>{r&&c(!0);try{const a=await(0,B.VQ)();!(0,Z.isEqual)(a,e)&&n(a);const o=await(0,B.l5)();!(0,Z.isEqual)(o,t)&&l(o)}catch(s){console.error("Error fetching floor data:",s)}finally{o&&(r&&(c(!1),r=!1),a=setTimeout(i,500))}};return i(),()=>{o=!1,clearTimeout(a)}}),[]);return(0,p.jsxs)(p.Fragment,{children:[s&&(0,p.jsx)(W.A,{}),(0,p.jsxs)(o.A,{css:z,children:[(0,p.jsxs)(o.A,{position:"sticky",top:0,zIndex:1e3,bgcolor:"#f0f1f6",children:[(0,p.jsx)(o.A,{p:1,children:(0,p.jsx)(q.A,{})}),(0,p.jsx)(I.A,{}),(0,p.jsxs)(o.A,{display:"flex",alignItems:"center",px:2,py:1,gap:2,children:[(0,p.jsx)(o.A,{flexGrow:1,minWidth:0,children:(0,p.jsx)(N,{})}),(0,p.jsx)(o.A,{children:(0,p.jsx)(i.A,{floorData:e,onTabChange:e=>{d("floorwise?floor=".concat(e))}})})]}),(0,p.jsx)(I.A,{})]}),(0,p.jsxs)(o.A,{display:"flex",mt:2,flexDirection:"column",alignItems:"center",children:[(0,p.jsx)(o.A,{width:"100%",mt:2,children:(0,p.jsx)(U,{floorData:e})}),(0,p.jsx)(o.A,{mt:1})]})]})]})}}}]);
//# sourceMappingURL=251.15ba0256.chunk.js.map