"use strict";(window.webpackChunksupplementarydashboard=window.webpackChunksupplementarydashboard||[]).push([[360],{1360:(e,n,t)=>{t.r(n),t.d(n,{default:()=>J});var l=t(7528),o=t(5043),i=t(2703),a=t(9002),r=t(5827),s=t(8903),c=t(1906),d=t(2258),h=t(2206),f=t(2019),p=t(7901),m=t(3290);t(231);t.p;var u=t(9516),x=t(4295),v=t(5586),g=t(7933),A=t(7670),b=t(1059),y=t(334),w=t(2371),j=t(7442);t.p;t(8265),t(4050),t(7135);t.p;t.p;const S=t.p+"static/media/error-circle.3d3836db033f450ead848c757575a2e1.svg";const I=t.p+"static/media/check-circle.a00dec72d85bc80bcefd824feff8d133.svg";var C=t(9336),k=t(579);const E=()=>(0,k.jsx)(C.A,{style:{border:"1px solid #70707059",margin:"10px",width:"100%"}});var D,_=t(9369),U=(t(3803),t(219),t(6598),t(9436),k.Fragment,function(e,n,t){return _.h.call(n,"css")?k.jsx(_.E,(0,_.c)(e,n),t):k.jsx(e,n,t)}),R=function(e,n,t){return _.h.call(n,"css")?k.jsxs(_.E,(0,_.c)(e,n),t):k.jsxs(e,n,t)};const W=["#29991d","RGB(128, 128,128)","#ff9933","red"],B=((0,m.i7)(D||(D=(0,l.A)(["\n  0% { transform: scale(1); opacity: 1; }\n  50% { transform: scale(0.8); opacity: 0.5; }\n  100% { transform: scale(1); opacity: 1; }\n"]))),e=>{let{floorData:n}=e;const{setValue:t}=(0,o.useContext)(p.i),l=(0,a.Zp)(),[r,m]=(0,o.useState)(0);(0,o.useEffect)((()=>{const e=n.map((e=>{var n,t,l,o,i,a;const r=(null!==(n=e.biological_alarms)&&void 0!==n?n:0)+(null!==(t=e.chemical_alarms)&&void 0!==t?t:0)+(null!==(l=e.radiological_alarms)&&void 0!==l?l:0),s=null!==(o=e.activeSensors)&&void 0!==o?o:0,c=null!==(i=e.totalSensors)&&void 0!==i?i:0,d=(null!==(a=e.unhealthySensors)&&void 0!==a?a:0)>0;return r>0?"#E30613":d?"#ff9933":0===c||0===s?"RGB(128, 128,128)":"#28A745"}));t(e);const l=setInterval((()=>m((e=>e+1))),2e4);return()=>clearInterval(l)}),[n,t]);return console.log("Floor new Data:",n),U(i.A,{mt:2,children:U(s.Ay,{container:!0,spacing:4,justifyContent:"center",children:n.map(((e,n)=>{var t,o,a,p,m,C,k,D,_;const B=(null!==(t=e.disconnected_sensors)&&void 0!==t?t:0)+(null!==(o=e.inactiveSensors)&&void 0!==o?o:0),T=(null!==(a=e.biological_alarms)&&void 0!==a?a:0)+(null!==(p=e.chemical_alarms)&&void 0!==p?p:0)+(null!==(m=e.radiological_alarms)&&void 0!==m?m:0),G=e.totalSensors,N=T>0?"red":e.unhealthySensors>0?"#ff9933":B>0||0===e.activeSensors||0===e.totalSensors?"RGB(128, 128,128)":"#29991d",F=0===e.totalSensors?y.A:e.biological_alarms>0?A.A:B>0||0===e.activeSensors?y.A:x.A,H=0===e.totalSensors?w.A:e.chemical_alarms>0?g.A:B>0||0===e.activeSensors?w.A:u.A,Z=0===e.totalSensors?j.A:e.radiological_alarms>0?b.A:B>0||0===e.activeSensors?j.A:v.A,z={chart:{type:"donut",toolbar:{show:!1},animations:{enabled:!0}},labels:["Active","Inactive","Unhealthy","CBRN Alarms"],legend:{show:!1},colors:W,dataLabels:{enabled:!0,formatter:(n,t)=>{let{seriesIndex:l}=t;return[e.activeSensors||0,B||0,e.unhealthySensors||0,T||0][l]||0}},plotOptions:{pie:{donut:{size:"65%",labels:{show:!0,total:{show:!0,label:"Total",fontSize:"14px",formatter:()=>"".concat(G)}}}}}},q=[e.activeSensors||0,B||0,e.unhealthySensors||0,T||0],L=null!==(C=null===(k=e.floor)||void 0===k?void 0:k.toUpperCase())&&void 0!==C?C:"";L.includes("QRT")||L.includes("LAB"),0===(null!==(D=e.totalSensors)&&void 0!==D?D:0)||(_=e.activeSensors);return U(s.Ay,{item:!0,xs:12,sm:6,md:4,lg:3,xl:2.4,children:U(d.J,{statusColor:N,sx:{width:"100%",height:"100%"},children:R(i.A,{p:2,backgroundColor:"white",display:"flex",flexDirection:"column",height:"100%",children:[U(h.U,{variant:"title3",fontWeight:"bold",mb:1,children:L}),R(i.A,{bgcolor:q.every((e=>!e))?"RGB(128, 128,128)":T>0?"#E30613":"#28A745",color:"white",px:2,py:1,height:60,display:"flex",alignItems:"center",justifyContent:"space-between",gap:1,mt:2,mx:-2,children:[U(h.U,{variant:"caption",sx:{color:"white"},children:T>0?"".concat(T," alarms detected"):"No alarms detected"}),U("img",{src:T>0?S:I,width:16,height:16,alt:"status"})]}),U(i.A,{display:"flex",justifyContent:"center",alignItems:"center",mb:2,sx:{height:160},children:q.every((e=>!e))?U(h.U,{variant:"title4",color:"textSecondary",mt:5,children:"No sensors available to display"}):R(i.A,{display:"flex",justifyContent:"center",alignItems:"center",width:"100%",children:[U(f.A,{options:z,series:q,type:"donut",width:140,height:140},r),U(i.A,{ml:2,children:["Active","Inactive","Unhealthy"].map(((e,n)=>R(i.A,{display:"flex",alignItems:"center",mb:1,children:[U(i.A,{width:12,height:12,borderRadius:"50%",bgcolor:W[n],mr:1}),R(h.U,{variant:"caption",children:[e,": ",q[n]||0]})]},e)))})]})}),R(i.A,{display:"flex",justifyContent:"space-between",alignItems:"center",mt:"auto",children:[U(i.A,{display:"flex",gap:4,children:[H,F,Z].map(((n,t)=>R(i.A,{display:"flex",flexDirection:"column",alignItems:"center",gap:.5,children:[U("img",{src:n,width:20,height:20}),U(h.U,{variant:"caption",style:{fontWeight:"bold",color:"#000"},children:[e.chemical_alarms,e.biological_alarms,e.radiological_alarms][t]||0})]},t)))}),R(i.A,{display:"flex",flexDirection:"row",alignItems:"center",gap:5,children:[R(i.A,{display:"flex",flexDirection:"column",alignItems:"center",children:[U(h.U,{variant:"caption",style:{fontWeight:"bold",color:"#000"},children:"Zones"}),U(h.U,{variant:"caption",style:{fontWeight:"bold",color:"#000"},children:e.totalZones})]}),R(i.A,{display:"flex",flexDirection:"column",alignItems:"center",children:[U(h.U,{variant:"caption",style:{fontWeight:"bold",color:"#000"},children:"Total"}),U(h.U,{variant:"caption",style:{fontWeight:"bold",color:"#000"},children:e.totalSensors})]})]})]}),U(E,{}),U(i.A,{display:"flex",justifyContent:"flex-end",children:U(c.A,{variant:"contained",sx:{backgroundColor:"#0073E7",border:"1px solid #146BD2",color:"#fff",textTransform:"none"},onClick:()=>(e=>l("floorwise?floor="+e))(e.floor),children:"Go to Floor"})})]})})},n)}))})})});t(9147);var T,G,N=t(4260),F=(t(2407),t(5308),t(9493)),H=t(5865);const Z=(0,m.i7)(T||(T=(0,l.A)(["\n  0% {\n    transform: translateX(100vw);\n  }\n  100% {\n    transform: translateX(-100%);\n  }\n"]))),z=(0,m.i7)(G||(G=(0,l.A)(["\n  0% { opacity: 1; }\n  30% { opacity: 0.5; }\n  100% { opacity: 1; }\n"]))),q=()=>{const[e,n]=(0,o.useState)(!1);(0,o.useEffect)((()=>{let e;const t=async()=>{const e=(await(0,N.$j)()).some((e=>"CBRN Alarms"===e.title&&Number(e.value)>0));n(e)};return t(),e=setInterval(t,5e3),()=>clearInterval(e)}),[]);const t=e?"Alarm Detected":"No Alarm Detected";return(0,k.jsx)(i.A,{sx:{width:"100%",overflow:"hidden",whiteSpace:"nowrap",backgroundColor:e?"#E30613":"#008000",padding:"8px",position:"relative",height:"48px",border:e?"2px solid red":"2px solid green",borderRadius:"5px",color:"white",textAlign:"center",animation:e?"".concat(z," 1s infinite"):"none"},children:(0,k.jsx)(i.A,{sx:{display:"flex",width:"100%",position:"relative",overflow:"hidden"},children:(0,k.jsx)(H.A,{variant:"h6",sx:{display:"inline-block",whiteSpace:"nowrap",animation:"".concat(Z," 25s linear infinite"),fontWeight:"bold"},children:t})})})};var L,Q=t(3536),V=t(4410);const X=(0,m.AH)(L||(L=(0,l.A)(["\n  height: 100vh;\n  display: flex;\n  flex-direction: column;\n  overflow: hidden;\n\n  &:hover {\n    overflow: auto;\n  }\n\n  /* Hide scrollbar in Firefox */\n  scrollbar-width: none;\n  /* Hide scrollbar in IE and Edge */\n  -ms-overflow-style: none;\n\n  /* Hide scrollbar in WebKit browsers */\n  &::-webkit-scrollbar {\n    width: 0px;\n  }\n\n  /* Show scrollbar on hover */\n  &:hover::-webkit-scrollbar {\n    width: 8px;\n  }\n\n  &:hover::-webkit-scrollbar-thumb {\n    background: #d3d3d3;\n    border-radius: 4px;\n  }\n"]))),J=()=>{const[e,n]=(0,o.useState)([]),[t,l]=(0,o.useState)([]),[s,c]=(0,o.useState)(!0),d=(0,a.Zp)();(0,o.useEffect)((()=>{let o,i=!0,a=!0;const r=async()=>{a&&c(!0);try{const o=await(0,N.VQ)();!(0,Q.isEqual)(o,e)&&n(o);const i=await(0,N.l5)();!(0,Q.isEqual)(i,t)&&l(i)}catch(s){console.error("Error fetching floor data:",s)}finally{i&&(a&&(c(!1),a=!1),o=setTimeout(r,500))}};return r(),()=>{i=!1,clearTimeout(o)}}),[]);return(0,k.jsxs)(k.Fragment,{children:[s&&(0,k.jsx)(F.A,{}),(0,k.jsxs)(i.A,{css:X,children:[(0,k.jsxs)(i.A,{position:"sticky",top:0,zIndex:1e3,bgcolor:"#f0f1f6",children:[(0,k.jsx)(i.A,{p:1,children:(0,k.jsx)(V.A,{})}),(0,k.jsx)(E,{}),(0,k.jsxs)(i.A,{display:"flex",alignItems:"center",px:2,py:1,gap:2,children:[(0,k.jsx)(i.A,{flexGrow:1,minWidth:0,children:(0,k.jsx)(q,{})}),(0,k.jsx)(i.A,{children:(0,k.jsx)(r.A,{floorData:e,onTabChange:e=>{d("floorwise?floor=".concat(e))}})})]}),(0,k.jsx)(E,{})]}),(0,k.jsxs)(i.A,{display:"flex",mt:2,flexDirection:"column",alignItems:"center",children:[(0,k.jsx)(i.A,{width:"100%",mt:2,children:(0,k.jsx)(B,{floorData:e})}),(0,k.jsx)(i.A,{mt:1})]})]})]})}}}]);
//# sourceMappingURL=360.51d4b732.chunk.js.map